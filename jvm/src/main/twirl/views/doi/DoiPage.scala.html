@import views.html.CpCommonContainerPage
@import eu.icoscp.envri.Envri

@(isLoggedIn: Boolean, isAdmin: Boolean, isDevelopment: Boolean = false)(implicit env: Envri)
@CpCommonContainerPage(s"${devIcon}DOI minting"){
	<style type="text/css">
		/* Hide content initially if on detail route to prevent flash */
		#main-wrapper {
			opacity: 0;
		}
		#main-wrapper.loaded {
			opacity: 1;
		}
		/* Disable smooth scrolling for instant navigation */
		html, body {
			scroll-behavior: auto !important;
		}
		@@media all and (max-width: 991px) {
			.spacyrow{
				margin-top: 15px;
				margin-bottom: 15px;
			}
		}
		.page-header {
			margin-top: 2rem;
			margin-bottom: 1rem;
		}
		.card {
			margin-bottom: 1rem;
		}
		.row + .row {
			margin-top: 1rem;
		}
		span.label{
			font-size: 100%;
			color: #000;
		}
		.is-anonymous .edit-control,
		.is-not-admin .admin-control,
		.is-not-admin .published-doi .btn-update-doi,
		.is-logged-in.is-not-admin .published-doi .nav-edit,
		.is-admin .btn-submit {
			display: none;
		}
		.is-not-admin .published-doi .card input,
		.is-not-admin .published-doi .card button,
		.is-not-admin .published-doi .card select,
		.is-anonymous .draft-doi .card input,
		.is-anonymous .draft-doi .card button,
		.is-anonymous .draft-doi .card select{
			pointer-events: none;
		}
		.is-not-admin .published-doi .card-body input{
			background-color: lightgrey;
		}
	</style>
}{
	<div id="main-wrapper" class="@isAdminClass @isLoggedInClass" data-permissions="@permissions">
		<div class="row">
			<div class="col">
				<div class="page-header">
					<h1>DOI minting</h1>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col">
				<p>@permissions</p>
			</div>
		</div>

		<hr>

		<div class="row">
			<div class="col">
				<div id="list-wrapper"></div>
			</div>
		</div>
	</div>


	<script src="/doi-js-@{if(isDevelopment) "fast" else ""}opt.js"></script>

}

@permissions = @{
	if(isAdmin)
		"As an admin, you can create, update, and delete draft and published DOIs."
	else if(isLoggedIn)
		"You can create draft DOIs and submit them for publication. We will review your submission before publishing the DOI. You can also clone an existing DOI to update it after it has been published."
	else
		"Please log in to create or update DOIs."
}

@isAdminClass = @{
	if(isAdmin) "is-admin" else "is-not-admin"
}

@isLoggedInClass = @{
	if(isLoggedIn) "is-logged-in" else "is-anonymous"
}

@devIcon = @{
	if(isDevelopment) "ðŸš§ " else ""
}

